<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gx.dao.FinanceDao">
    <resultMap id="BaseResultMap" type="com.gx.po.FinancePo">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Oct 16 19:18:30 CST 2016.
        -->
        <constructor>
            <idArg column="id" jdbcType="INTEGER" javaType="java.lang.Integer"/>
            <arg column="supplierId" jdbcType="INTEGER" javaType="java.lang.Integer"/>
            <arg column="roomId" jdbcType="INTEGER" javaType="java.lang.Integer"/>
            <arg column="roomNumber" jdbcType="VARCHAR" javaType="java.lang.String"/>
           <!-- <arg column="yearM" jdbcType="TIMESTAMP" javaType="java.sql.Timestamp"/>-->
            <arg column="yearM" jdbcType="VARCHAR" javaType="java.lang.String"/>
            <arg column="PHP" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="RMB" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="rent" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="water" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="electricity" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="maintenanceCost" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="network" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="buildingManagementFee" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="linenCleaningfee" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="dailySupplies" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="otherExpenses" jdbcType="DOUBLE" javaType="java.lang.Double"/>
            <arg column="time" jdbcType="TIMESTAMP" javaType="java.sql.Timestamp" />
        </constructor>
    </resultMap>

    <!--   新增 -->
    <insert id="insertAll" parameterType="com.gx.po.FinancePo" useGeneratedKeys="true"  keyProperty="id">
     INSERT INTO `finance` (supplierId,roomId,roomNumber,yearM,PHP,RMB,rent,water,electricity,maintenanceCost,network
     ,buildingManagementFee,linenCleaningfee,dailySupplies,otherExpenses,`time`)
     values (#{supplierId,jdbcType=INTEGER}, #{roomId,jdbcType=INTEGER},
             #{roomNumber,jdbcType=VARCHAR}, #{yearM,jdbcType=VARCHAR}
             , #{PHP,jdbcType=DOUBLE}, #{RMB,jdbcType=DOUBLE}, #{rent,jdbcType=DOUBLE}, #{water,jdbcType=DOUBLE},
              #{electricity,jdbcType=DOUBLE}, #{maintenanceCost,jdbcType=DOUBLE}, #{network,jdbcType=DOUBLE}, #{buildingManagementFee,jdbcType=DOUBLE}
              ,#{linenCleaningfee,jdbcType=DOUBLE},#{dailySupplies,jdbcType=DOUBLE},#{otherExpenses,jdbcType=DOUBLE},#{time,jdbcType=TIMESTAMP})
  </insert>

    <!--   修改要用的精确查询 -->
    <select id="selectById" resultType="com.gx.po.FinancePo" parameterType="java.lang.Integer">
    select * from `finance` where id=#{id,jdbcType=INTEGER}
   </select>

    <!--    修改 -->
    <update id="updateById" parameterType="com.gx.po.FinancePo">
      UPDATE `finance` SET PHP=#{PHP,jdbcType=DOUBLE},
			             RMB=#{RMB,jdbcType=DOUBLE}
                   WHERE id = #{id,jdbcType=INTEGER}
   </update>

    <!--    修改 -->
    <update id="updateRentById" parameterType="com.gx.po.FinancePo">
      UPDATE `finance` SET rent=#{rent,jdbcType=DOUBLE},
			             water=#{water,jdbcType=DOUBLE} ,
			             electricity=#{electricity,jdbcType=DOUBLE},
			              maintenanceCost=#{maintenanceCost,jdbcType=DOUBLE},
			               network=#{network,jdbcType=DOUBLE},
			                buildingManagementFee=#{buildingManagementFee,jdbcType=DOUBLE}
                   WHERE id = #{id,jdbcType=INTEGER}
   </update>
   <!-- &lt;!&ndash;    修改 &ndash;&gt;
    <update id="updateOtherById" parameterType="com.gx.po.FinancePo">
      UPDATE `finance` SET linenCleaningfee=#{linenCleaningfee,jdbcType=DOUBLE},
			                  dailySupplies=#{dailySupplies,jdbcType=DOUBLE},
			                   otherExpenses=#{otherExpenses,jdbcType=DOUBLE}
                   WHERE id = #{id,jdbcType=INTEGER}
   </update>-->

    <!--    修改 -->
    <update id="updateOtherById" parameterType="com.gx.po.FinancePo">
      UPDATE `finance` SET linenCleaningfee=#{linenCleaningfee,jdbcType=DOUBLE},
			                  dailySupplies=#{dailySupplies,jdbcType=DOUBLE},
			                   otherExpenses=#{otherExpenses,jdbcType=DOUBLE}
                   WHERE `yearM`= #{yearM,jdbcType=VARCHAR} AND `roomId`=#{roomId,jdbcType=INTEGER}
   </update>

    <delete id="deleteById" parameterType="java.lang.Integer">
    DELETE  `finance` WHERE id = #{id,jdbcType=INTEGER}
  </delete>
<!--<select id="selectYearId"  resultType="com.gx.po.FinancePo">
     SELECT * FROM `finance` WHERE `yearM` = #{yearM,jdbcType=VARCHAR} AND `roomId`=#{roomId,jdbcType=INTEGER}
</select>-->

    <!--   分页模糊查询 -->
    <select id="pageFinance" resultType="com.gx.po.FinancePo">
	  SELECT f.*,(f.`PHP`-(f.`rent`+f.`water`+f.`electricity`+f.`maintenanceCost`+f.`network`
	  +f.`buildingManagementFee`+f.`linenCleaningfee`+f.`dailySupplies`+f.`otherExpenses`)) AS `count`
	FROM `finance` f
	WHERE `yearM`= #{yearM,jdbcType=VARCHAR}
    limit #{start},#{pageSize}
  </select>


    <select id="countFinance" resultType="java.lang.Integer">
      select count(*)
   FROM `finance` f
	WHERE `yearM`= #{yearM,jdbcType=VARCHAR}
  </select>

    <select id="countFinanceM" resultType="java.lang.Integer">
      select count(*)
   FROM `finance` f INNER JOIN  `room` r ON f.`roomId`=r.id
	WHERE `yearM`= #{yearM,jdbcType=VARCHAR} AND  f.`roomId`=#{roomId,jdbcType=INTEGER}
  </select>
    <!--   修改要用的精确查询 -->
    <select id="selectByyearM" resultType="com.gx.po.FinancePo">
    select * from `finance` where `yearM`= #{yearM,jdbcType=VARCHAR} AND `roomId`=#{roomId,jdbcType=INTEGER}
   </select>

    <update id="updatePHP"  parameterType="com.gx.po.FinancePo">
        UPDATE  `finance` SET `PHP`=#{PHP,jdbcType=DOUBLE}  WHERE `id`=#{id,jdbcType=INTEGER}
    </update>

    <update id="updateRMB"  parameterType="com.gx.po.FinancePo">
      UPDATE  `finance` SET `RMB`=#{RMB,jdbcType=DOUBLE}  WHERE `id`=#{id,jdbcType=INTEGER}
    </update>

    <select id="slectCountRoom" resultType="java.lang.Integer">
        SELECT COUNT(DISTINCT `roomId`) FROM `finance`
    </select>

    <select id="listtime"  resultType="com.gx.po.FinancePo">
         SELECT f.*,(f.`PHP`-(f.`rent`+f.`water`+f.`electricity`+f.`maintenanceCost`+f.`network`
	  +f.`buildingManagementFee`+f.`linenCleaningfee`+f.`dailySupplies`+f.`otherExpenses`)) AS `count`
	FROM `finance` f
	WHERE `yearM`= #{yearM,jdbcType=VARCHAR}
    </select>

    <select id="updateRoomNuberByRoomId" resultType="java.lang.Integer">
        UPDATE `finance` SET `roomNumber`=#{roomNumber,jdbcType=VARCHAR} WHERE `roomId`=#{roomId,jdbcType=INTEGER}
    </select>
</mapper>